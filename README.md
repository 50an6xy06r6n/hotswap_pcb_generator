# Hotswap Keyboard "PCB" Generator
This is an OpenSCAD script that can be used to generate 3D-printable hotswap "PCBs" for prototyping new keyboard layouts. The design is currently optimized for use with staggered-column or ortholinear layouts. It would technically work for a staggered-row layout, but you lose clean routing for the column wires. Working on a solution for this, but it may sacrifice a bit of printability.

The design uses 22AWG stranded wire for the matrix rows and columns (wire gauge is configurable), with the top switch pin plugging directly into the row wire and the diode cathode sticking through the column wire. The bottom switch pin makes contact with the diode anode, though that connection can be a bit finicky. I've solved this for now by putting a slight angle on the channel that holds the anode leg and switch pin, but it does slightly bend the switch pin in the process. The bend is pretty minor and can be easily bent back, but the angle is configurable for those who don't want to damage their switches. You can also use a bit of aluminum foil to solidify the contact point, but I found that to be too tedious in practice. If you're using silicone wires you might be able to get away with sticking the switch pin directly through the insulation, but I recommend slicing the insulation open with a utility knife for the best results. You will also need to pierce the column wires with a sewing needle to create a path for the diode leg to go through, as they're not rigid enough on their own. Electrical integrity is pretty good overall once the switches are properly seated. Hole sizes and such are tuned to my printer, which isn't the most dimensionally accurate, so you may get a better fit by tweaking the hole sizes slightly. I also recommend generating the final stl with a larger $fn value, though it does take a while to finish.

The basic layout format matches the commonly-used Keyboard Layout Editor (KLE) format, and the provided node.js script can convert a KLE json into a vector format usable with the OpenSCAD script. I'm working on a cleaner way to automate it, but there are some limitations with the OpenSCAD customizer that I'm trying to figure out. There are also a couple of additional parameters pertaining to the geometry of the PCB. One affects how much the PCB extends past each socket, which allows you to trim off excess on the edges and connect parts that are not directly adjacent (such as thumb clusters). Another allows you to rotate the wire channels for the column wires, which is also useful for wiring thumb clusters. Finally, there's also a hole_layout parameter that you can use to add clearance holes for mounting the PCB to a case.
